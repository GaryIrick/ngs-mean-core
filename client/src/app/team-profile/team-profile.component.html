<div class="container" *ngIf="showMe">
    <div class="row">
        <div class="col-md-12">
            <div>
                <!-- captain options -->
                <div class="row" *ngIf="showEditDialog()">
                    <div class="col-8 offset-2">
                        <div class="row mt-3">
                            <div class="col-6">
                                Welcome to your team profile!
                            </div>
                            <div class="col-6">
                                <div *ngIf="editOn == true">
                                    <button type="button" (click)="openEdit()" class="btn btn-primary float-right">Edit</button>
                                </div>
                                <div class="row" *ngIf="!editOn">
                                    <div class="col">
                                        <div class="dropdown">
                                            <button type="button" class="btn btn-danger dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <span class="icon-align">
                                                    <i class="material-icons md-18">settings</i> 
                                                    Manage 
                                                </span>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item finger" (click)="openCaptainChangeDialog()"><span class="icon-align"><i class="material-icons">cached</i>Change
                                                        captain</span></a>
                                                <a class="dropdown-item finger" (click)="openDialog()"><span class="icon-align"><i class="material-icons">delete_forever</i>Delete team</span></a>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col">
                                        <button type="button" [disabled]="!validate()" (click)="save()" class="btn btn-success ">Save</button>
                                    </div>
                                    <div class="col">
                                        <button type="button" (click)="cancel()" class="btn btn-danger">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- admin options -->
                <div class="row" *ngIf="componentEmbedded">
                    <div class="col-8 offset-2">
                        <div class="row">
                            <div class="col">
                                <div class="dropdown">
                                    <button type="button" class="btn btn-danger dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="icon-align">
                                            <i class="material-icons md-18">settings</i>
                                                 Manage
                                        </span>
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item finger" (click)="openAdminCaptainChangeDialog()"><span class="icon-align"><i class="material-icons">cached</i>Change captain</span></a>
                                        <a class="dropdown-item finger" (click)="openAdminDeleteDialog()"><span class="icon-align"><i class="material-icons">delete_forever</i>Delete team</span></a>
                                    </div>
                                </div>

                            </div>
                            <div class="col">
                                <button type="button" (click)="adminSave()" class="btn btn-success ">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-sm-12 col-md-5">
                    <app-image-upload [showEdit]="auth.getUser()===returnedProfile.captain" [teamName]="returnedProfile.teamName" [teamLogo]="imageFQDN(returnedProfile.logo)"></app-image-upload>
                </div>
                <div class="col-sm-12 col-md-7">
                    <mat-form-field class="tp-FullWidth">
                        <input matInput placeholder="Team Name" [(ngModel)]="returnedProfile.teamName" (ngModelChange)="modelChange()" [disabled]="!componentEmbedded">
                    </mat-form-field>
                    <mat-form-field class="tp-FullWidth">
                        <input matInput placeholder="Team Division" [(ngModel)]="returnedProfile.divisionDisplayName" disabled="true">
                    </mat-form-field>
                    <mat-form-field class="tp-FullWidth">
                        <input matInput placeholder="Team MMR Average" [(ngModel)]="returnedProfile.teamMMRAvg" disabled="true">
                    </mat-form-field>
                    <mat-slide-toggle [disabled]="editOn" [(ngModel)]="returnedProfile.lookingForMore">
                        Looking for More.
                    </mat-slide-toggle>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col">
                    <span>Team Members:</span>
                </div>
            </div>
            <div *ngIf="!componentEmbedded">

                <!-- add team member -->
                <div class="row mt-3" *ngIf="!editOn">
                    <div class="col">
                        <h3>Invite users to your team!</h3>
                        <mat-accordion>
                            <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Existing User:
                                    </mat-panel-title>
                                    <mat-panel-description>
                                        Search if user is a member of NGS all ready.
                                    </mat-panel-description>
                                </mat-expansion-panel-header>

                                <app-user-search [filterUser]="filterUsers" [type]="'unteamed'" [buttonText]="'Invite User'" (userSelected)="invite($event)"></app-user-search>

                            </mat-expansion-panel>

                            <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        New User:
                                    </mat-panel-title>
                                    <mat-panel-description>
                                        Invite a user to join NGS!
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <mat-form-field>
                                    <input matInput placeholder="Enter users email to send them an invite to NGS!">
                                </mat-form-field>
                                <button type="button">Invite!</button>
                            </mat-expansion-panel>
                        </mat-accordion>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <span class="p-3 text-success">{{message}}</span>
                    </div>
                </div>
            </div>



            <!-- team members list -->
            <div class="row mt-3" *ngFor="let player of returnedProfile.teamMembers">
                <div class="col">
                    <mat-form-field class="tp-FullWidth">
                        <input matInput placeholder="Player Name" value={{player.displayName}} disabled="true">
                    </mat-form-field>
                </div>
            </div>
            <!--  -->
            <!-- <div class="row mt-3">
                    <div class="col">

                    </div>
                </div> -->

            <mat-form-field class="tp-FullWidth">
                <mat-select placeholder="Team Competitive Level" [disabled]="editOn" [(ngModel)]="returnedProfile.competitiveLevel">
                    <mat-option *ngFor="let level of competitonLevel" [value]="level.val">
                        {{level.display}}
                    </mat-option>
                </mat-select>
                <mat-hint align="start"><strong>Generally how serious / competitively you're looking to play</strong> </mat-hint>
            </mat-form-field>

            <!-- <div class="row mt-2">
                    <div class="col"> -->
            <mat-form-field class="tp-FullWidth">
                <mat-label>Describe the teams play history / style</mat-label>
                <textarea matInput cdkTextareaAutosize [(ngModel)]="returnedProfile.descriptionOfTeam" [disabled]="editOn"></textarea>
            </mat-form-field>
            <!-- </div>
                </div> -->
            <div class="row mt-3">
                <div class="col">
                    Roles the team needs:
                    <section>
                        <mat-checkbox class="role-margin" [(ngModel)]="returnedProfile.rolesNeeded.tank" [disabled]="editOn">Tank</mat-checkbox>
                        <mat-checkbox class="role-margin" [(ngModel)]="returnedProfile.rolesNeeded.offlane" [disabled]="editOn">Offlane</mat-checkbox>
                        <mat-checkbox class="role-margin" [(ngModel)]="returnedProfile.rolesNeeded.assassin" [disabled]="editOn">Assassin</mat-checkbox>
                        <mat-checkbox class="role-margin" [(ngModel)]="returnedProfile.rolesNeeded.support" [disabled]="editOn">Support</mat-checkbox>
                        <mat-checkbox class="role-margin" [(ngModel)]="returnedProfile.rolesNeeded.specialist" [disabled]="editOn">Specialist</mat-checkbox>
                    </section>
                </div>
            </div>
            <!-- Availability Schedule -->
            <div class="row mt-3">
                <div class="col">
                    Times the team plays or practices:
                </div>
            </div>
            <div [ngClass]="{'error-avail':errorAvail}">
                <div class="row mt-3" [hidden]="!errorAvail">
                    <div class="col">
                        <p class="req-field">Please enter at least 1 time available!</p>
                    </div>
                </div>
                <div class="row mt-3" [hidden]="hideDay(editOn,returnedProfile.availability.monday.available)">
                    <div class="col">
                        <mat-checkbox [(ngModel)]="returnedProfile.availability.monday.available" [disabled]="editOn">Monday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.monday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput [(ngModel)]="returnedProfile.availability.monday.endTime" type="time" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.tuesday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.tuesday.available" [disabled]="editOn">Tuesday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.tuesday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.tuesday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.wednesday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.wednesday.available" [disabled]="editOn">Wednesday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.wednesday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.wednesday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.thursday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.thursday.available" [disabled]="editOn">Thursday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.thursday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.thursday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.friday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.friday.available" [disabled]="editOn">Friday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.friday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.friday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.saturday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.saturday.available" [disabled]="editOn">Saturday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.saturday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.saturday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="hideDay(editOn,returnedProfile.availability.sunday.available)">
                    <div class="col">
                        <mat-checkbox class="" [(ngModel)]="returnedProfile.availability.sunday.available" [disabled]="editOn">Sunday</mat-checkbox>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.sunday.startTime" placeholder="Start Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field>
                            <input matInput type="time" [(ngModel)]="returnedProfile.availability.sunday.endTime" placeholder="End Time" [disabled]="editOn">
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col">
                    <mat-form-field class="tp-FullWidth">
                        <mat-select placeholder="Timezone:" [formControl]="timezoneControl" [(ngModel)]="returnedProfile.timeZone">
                            <mat-option *ngFor="let zone of timezone.timezones" [value]="zone.value" [disabled]="editOn">
                                {{zone.text}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>
</div>